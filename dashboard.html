<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุฅุฏุงุฑุฉ - ุซุงูููุฉ ุตูุงุญ ุงูุฏูู ุงูุฃููุจู</title>
    <link rel="stylesheet" href="css/styles-dynamic.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/lightbox.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <!-- CryptoJS for password hashing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="javascript/toast.js" defer></script>
    <script src="javascript/config.js" defer></script>
    <script src="javascript/utils.js" defer></script>
    <script src="javascript/validation.js" defer></script>
    <script src="javascript/supabase-api.js" defer></script>
    <script src="javascript/auth.js" defer></script>
    <script src="javascript/gallery-manager.js" defer></script>
    <script src="javascript/email-notifications.js" defer></script>
    <script src="javascript/accessibility.js" defer></script>
    <script src="javascript/dashboard.js" defer></script>
</head>

<body>
    <!-- LOGIN PAGE (Initially Shown) -->
    <div id="loginPage" class="auth-page">
        <div class="auth-container">
            <div class="auth-card">
                <h1>ููุญุฉ ุงูุฃุณุงุชุฐุฉ ูุงูุฅุฏุงุฑุฉ</h1>
                <p>ุชุณุฌูู ุงูุฏุฎูู</p>

                <form id="loginForm" class="auth-form">
                    <div class="form-group">
                        <label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="email" name="email" required placeholder="your@email.com">
                    </div>

                    <div class="form-group">
                        <label for="password">ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="password" name="password" required placeholder="โขโขโขโขโขโขโขโข">
                    </div>

                    <button type="submit" class="btn btn-primary">ุฏุฎูู</button>

                    <p class="auth-message" id="authMessage"></p>
                </form>

                <p class="auth-switch" style="font-size: 13px; color: #666;">
                    ๐ง ุญุณุงุจุงุช ููุฌูุฏุฉ ุจุงููุนู
                </p>
            </div>
        </div>
    </div>

    <!-- SIGNUP PAGE REMOVED - Accounts are pre-created -->
    </div>

    <!-- DASHBOARD PAGE (Hidden Initially) -->
    <div id="dashboardPage" class="dashboard hidden">
        <header class="dashboard-header">
            <h1>ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ</h1>
            <div class="user-menu">
                <span id="userEmail" class="user-email"></span>
                <button id="logoutBtn" class="btn btn-logout">ุชุณุฌูู ุฎุฑูุฌ</button>
            </div>
        </header>

        <!-- ADMIN STATS -->
        <div class="admin-stats" id="adminStats" style="padding: 20px; margin: 0 20px;">
            <div class="stat-card">
                <div class="stat-label">ุนุฏุฏ ุงูุฃูุดุทุฉ</div>
                <div class="stat-number" id="statActivities">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ุนุฏุฏ ุงูุฅุนูุงูุงุช</div>
                <div class="stat-number" id="statAnnouncements">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ุตูุฑ ุงููุนุฑุถ</div>
                <div class="stat-number" id="statGallery">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ุฑุณุงุฆู ุงูุชูุงุตู</div>
                <div class="stat-number" id="statContacts">0</div>
            </div>
        </div>

        <div class="dashboard-container">
            <!-- SIDEBAR -->
            <aside class="dashboard-sidebar">
                <nav class="sidebar-nav">
                    <button class="nav-item active" data-section="activities">
                        ๐ ุฅุฏุงุฑุฉ ุงูุฃูุดุทุฉ
                    </button>
                    <button class="nav-item" data-section="announcements">
                        ๐ข ุฅุนูุงูุงุช ุนุงูุฉ
                    </button>
                    <button class="nav-item" data-section="exams">
                        ๐ ุฅุฏุงุฑุฉ ุงูุงูุชุญุงูุงุช
                    </button>
                    <button class="nav-item" data-section="competitions">
                        ๐ ุฅุฏุงุฑุฉ ุงููุณุงุจูุงุช
                    </button>
                    <button class="nav-item" data-section="memos">
                        ๐ ุงููุฐูุฑุงุช ุงููุฒุงุฑูุฉ
                    </button>
                    <button class="nav-item" data-section="certificates">
                        ๐ ุทูุจุงุช ุงูุดูุงุฏุงุช
                    </button>
                    <button class="nav-item" data-section="gallery">
                        ๐ผ๏ธ ุฅุฏุงุฑุฉ ุงููุนุฑุถ
                    </button>
                    <button class="nav-item" data-section="contacts">
                        โ๏ธ ุฑุณุงุฆู ุงูุชูุงุตู
                    </button>
                </nav>
            </aside>

            <!-- MAIN CONTENT -->
            <main class="dashboard-main">
                <!-- ACTIVITIES SECTION -->
                <section id="activitiesSection" class="dashboard-section active">
                    <h2>ุฅุฏุงุฑุฉ ุงูุฃูุดุทุฉ</h2>

                    <div class="add-form-container">
                        <h3>ุฅุถุงูุฉ ูุดุงุท ุฌุฏูุฏ</h3>
                        <form id="addActivityForm" class="dashboard-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="actTitle">ุนููุงู ุงููุดุงุท</label>
                                    <input type="text" id="actTitle" required>
                                </div>
                                <div class="form-group">
                                    <label for="actDate">ุงูุชุงุฑูุฎ</label>
                                    <input type="date" id="actDate" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="actDesc">ุงููุตู</label>
                                <textarea id="actDesc" rows="4" required></textarea>
                            </div>

                            <div class="form-group">
                                <label for="actImage">ุตูุฑุฉ ุงููุดุงุท</label>
                                <input type="file" id="actImage" accept="image/*">
                                <span class="form-hint">ุณูุชู ุฑูุน ุงูุตูุฑุฉ ุฅูู Supabase Storage</span>
                            </div>

                            <button type="submit" class="btn btn-primary">ุฅุถุงูุฉ ุงููุดุงุท</button>
                        </form>
                    </div>

                    <div class="items-list-container">
                        <h3>ุงูุฃูุดุทุฉ ุงูุญุงููุฉ</h3>
                        <div id="activityMessage" class="activity-message"></div>
                        <div id="activitiesList" class="items-list">
                            <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
                        </div>
                    </div>
                </section>

                <!-- GENERAL ANNOUNCEMENTS -->
                <section id="announcementsSection" class="dashboard-section">
                    <h2>ุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช ุงูุนุงูุฉ</h2>

                    <div class="add-form-container">
                        <h3>ุฅุถุงูุฉ ุฅุนูุงู ุนุงู ุฌุฏูุฏ</h3>
                        <form id="addAnnouncementForm" class="dashboard-form">
                            <input type="hidden" id="annCategory" value="ุนุงู">
                            <div class="form-group">
                                <label for="annTitle">ุนููุงู ุงูุฅุนูุงู</label>
                                <input type="text" id="annTitle" required>
                            </div>
                            <div class="form-group">
                                <label for="annContent">ูุญุชูู ุงูุฅุนูุงู</label>
                                <textarea id="annContent" rows="5" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="annFile">ููู PDF (ุงุฎุชูุงุฑู)</label>
                                <input type="file" id="annFile" accept=".pdf">
                            </div>
                            <button type="submit" class="btn btn-primary">ูุดุฑ ุงูุฅุนูุงู</button>
                        </form>
                    </div>

                    <div class="items-list-container">
                        <div id="announcementMessage" class="activity-message"></div>
                        <div id="announcementsList" class="items-list">
                            <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
                        </div>
                    </div>
                </section>

                <!-- EXAMS SECTION -->
                <section id="examsSection" class="dashboard-section">
                    <h2>ุฅุฏุงุฑุฉ ุงูุงูุชุญุงูุงุช</h2>
                    <div class="add-form-container">
                        <h3>ุฅุถุงูุฉ ุฅุนูุงู ุงูุชุญุงู ุฌุฏูุฏ</h3>
                        <form id="addExamForm" class="dashboard-form">
                            <input type="hidden" id="examCategory" value="ุงูุชุญุงูุงุช">
                            <div class="form-group">
                                <label for="examTitle">ุนููุงู ุงูุงูุชุญุงู</label>
                                <input type="text" id="examTitle" required>
                            </div>
                            <div class="form-group">
                                <label for="examContent">ุงูุชูุงุตูู</label>
                                <textarea id="examContent" rows="4" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="examFile">ุฌุฏูู ุงูุงูุชุญุงู (PDF)</label>
                                <input type="file" id="examFile" accept=".pdf">
                            </div>
                            <button type="submit" class="btn btn-primary">ุญูุธ ุงูุงูุชุญุงู</button>
                        </form>
                    </div>
                    <div class="items-list-container">
                        <div id="examsListDashboard" class="items-list">
                            <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
                        </div>
                    </div>
                </section>

                <!-- COMPETITIONS SECTION -->
                <section id="competitionsSection" class="dashboard-section">
                    <h2>ุฅุฏุงุฑุฉ ุงููุณุงุจูุงุช</h2>
                    <div class="add-form-container">
                        <h3>ุฅุถุงูุฉ ูุณุงุจูุฉ ุฌุฏูุฏุฉ</h3>
                        <form id="addCompetitionForm" class="dashboard-form">
                            <input type="hidden" id="compCategory" value="ูุณุงุจูุงุช">
                            <div class="form-group">
                                <label for="compTitle">ุนููุงู ุงููุณุงุจูุฉ</label>
                                <input type="text" id="compTitle" required>
                            </div>
                            <div class="form-group">
                                <label for="compContent">ุงูุชูุงุตูู</label>
                                <textarea id="compContent" rows="4" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="compFile">ููู ุงููุณุงุจูุฉ (PDF)</label>
                                <input type="file" id="compFile" accept=".pdf">
                            </div>
                            <button type="submit" class="btn btn-primary">ูุดุฑ ุงููุณุงุจูุฉ</button>
                        </form>
                    </div>
                    <div class="items-list-container">
                        <div id="competitionsListDashboard" class="items-list">
                            <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
                        </div>
                    </div>
                </section>

                <!-- MINISTRY MEMOS SECTION -->
                <section id="memosSection" class="dashboard-section">
                    <h2>ุฅุฏุงุฑุฉ ุงููุฐูุฑุงุช ุงููุฒุงุฑูุฉ</h2>
                    <div class="add-form-container">
                        <h3>ุฅุถุงูุฉ ูุฐูุฑุฉ ุฌุฏูุฏุฉ</h3>
                        <form id="addMemoForm" class="dashboard-form">
                            <input type="hidden" id="memoCategory" value="ูุฐูุฑุงุช ูุฒุงุฑูุฉ">
                            <div class="form-group">
                                <label for="memoTitle">ุนููุงู ุงููุฐูุฑุฉ</label>
                                <input type="text" id="memoTitle" required>
                            </div>
                            <div class="form-group">
                                <label for="memoContent">ุงูุชูุงุตูู</label>
                                <textarea id="memoContent" rows="4" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="memoFile">ูุต ุงููุฐูุฑุฉ (PDF)</label>
                                <input type="file" id="memoFile" accept=".pdf">
                            </div>
                            <button type="submit" class="btn btn-primary">ุญูุธ ุงููุฐูุฑุฉ</button>
                        </form>
                    </div>
                    <div class="items-list-container">
                        <div id="ministryListDashboard" class="items-list">
                            <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
                        </div>
                    </div>
                </section>

                <!-- CERTIFICATES REQUESTS SECTION -->
                <section id="certificatesSection" class="dashboard-section">
                    <h2>ุทูุจุงุช ุงูุดูุงุฏุงุช ุงููุฏุฑุณูุฉ</h2>

                    <div class="certificate-filters">
                        <select id="certStatusFilter" class="filter-select">
                            <option value="">-- ุฌููุน ุงูุญุงูุงุช --</option>
                            <option value="pending">ููุฏ ุงูุงูุชุธุงุฑ</option>
                            <option value="approved">ููุงูู ุนููู</option>
                            <option value="rejected">ูุฑููุถ</option>
                            <option value="completed">ููุชูู</option>
                        </select>
                    </div>

                    <div class="certificate-requests-container">
                        <div id="certificateMessage" class="activity-message"></div>
                        <div id="certificatesList" class="certificate-requests-list">
                            <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
                        </div>
                    </div>
                </section>

                <!-- GALLERY SECTION -->
                <section id="gallerySection" class="dashboard-section">
                    <h2>ุฅุฏุงุฑุฉ ุงููุนุฑุถ</h2>

                    <div class="add-form-container">
                        <h3>ุฅุถุงูุฉ ุตูุฑุฉ ุฌุฏูุฏุฉ</h3>
                        <form id="addGalleryForm" class="dashboard-form">
                            <div class="form-group">
                                <label for="galleryTitle">ุนููุงู ุงูุตูุฑุฉ</label>
                                <input type="text" id="galleryTitle" required>
                            </div>

                            <div class="form-group">
                                <label for="galleryDescription">ุงููุตู (ุงุฎุชูุงุฑู)</label>
                                <textarea id="galleryDescription" rows="3"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="galleryImage">ุงูุตูุฑุฉ</label>
                                <input type="file" id="galleryImage" accept="image/*" required>
                                <span class="form-hint">ุณูุชู ุฑูุน ุงูุตูุฑุฉ ุฅูู Supabase Storage</span>
                            </div>

                            <button type="submit" class="btn btn-primary">ุฅุถุงูุฉ ุงูุตูุฑุฉ</button>
                        </form>
                    </div>

                    <div class="items-list-container">
                        <h3>ุตูุฑ ุงููุนุฑุถ</h3>
                        <div id="galleryMessage" class="activity-message"></div>
                        <div id="galleryList" class="gallery-admin-list">
                            <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
                        </div>
                    </div>
                </section>

                <!-- CONTACTS MESSAGES SECTION -->
                <section id="contactsSection" class="dashboard-section">
                    <h2>ุฑุณุงุฆู ุงูุชูุงุตู</h2>

                    <div class="contacts-filters">
                        <button id="markAllReadBtn" class="btn btn-small">ูุถุน ุนูุงูุฉ ุนูู ุงููู ูููุฑูุก</button>
                        <select id="contactsStatusFilter" class="filter-select">
                            <option value="">-- ุฌููุน ุงูุฑุณุงุฆู --</option>
                            <option value="unread">ุบูุฑ ููุฑูุก</option>
                            <option value="read">ููุฑูุก</option>
                        </select>
                    </div>

                    <div class="contacts-container">
                        <div id="contactsMessage" class="activity-message"></div>
                        <div id="contactsList" class="contacts-list">
                            <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- CONFIRMATION DIALOG -->
    <div class="confirm-dialog" id="confirmDialog">
        <div class="confirm-dialog-box">
            <h3 id="confirmTitle">ูู ุฃูุช ูุชุฃูุฏุ</h3>
            <p id="confirmMessage">ูุฐุง ุงูุฅุฌุฑุงุก ูุง ูููู ุงูุชุฑุงุฌุน ุนูู.</p>
            <div class="confirm-dialog-buttons">
                <button class="confirm-dialog-btn confirm" id="confirmYes">ุญุฐู</button>
                <button class="confirm-dialog-btn cancel" id="confirmNo">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

</body>

</html>